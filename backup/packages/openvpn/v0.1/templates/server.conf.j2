#
# Generated by devo.ps for {{ ansible_hostname }}
#
{# Define default variables if undefined #}
{% set openvpn = openvpn | default({}) %}

# Which local IP address should OpenVPN
# listen on? (optional)
;local a.b.c.d
;local 184.106.71.136

port {{ openvpn.port | default('1194') }}
proto {{ openvpn.proto | default('udp') }}
dev {{ openvpn.dev | default('tun') }}

ca ca.crt
cert server.crt
key server.key
dh dh1024.pem
tls-auth ta.key 0

server {{ openvpn.network | default('10.8.0.0') }} {{ openvpn.netmask | default('255.255.255.0') }}

ifconfig-pool-persist ipp.txt
push "redirect-gateway def1 bypass-dhcp"
push "dhcp-option DNS {{ openvpn.dns1 | default('208.67.222.222') }}"
push "dhcp-option DNS {{ openvpn.dns2 | default('208.67.220.220') }}"

keepalive 10 120

cipher {{ openvpn.cipher | default('BF-CBC') }}

comp-lzo

max-clients {{ openvpn.max_client | default('100') }}

user {{ openvpn.user | default('nobody') }}
group {{ openvpn.group | default('nogroup') }}

persist-key
persist-tun

status openvpn-status.log
log-append  openvpn.log

# Set the appropriate level of log file verbosity.
verb 3

# either mode  server or client
mode server

