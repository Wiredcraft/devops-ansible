#
# Generated by devo.ps for {{ ansible_hostname }}
#
{# Define default variables if undefined #}
{% set openvpn = openvpn | default({}) %}

# Which local IP address should OpenVPN
# listen on? (optional)
;local a.b.c.d
;local 184.106.71.136

port {{ openvpn.port }}
proto {{ openvpn.proto }}
dev {{ openvpn.dev }}

ca ca.crt
cert server.crt
key server.key
dh dh1024.pem
tls-auth ta.key 0

server {{ openvpn.network }} {{ openvpn.netmask }}

ifconfig-pool-persist ipp.txt
push "redirect-gateway def1 bypass-dhcp"
push "dhcp-option DNS {{ openvpn.dns1 }}"
push "dhcp-option DNS {{ openvpn.dns2 }}"

keepalive 10 120

cipher {{ openvpn.cipher }}

comp-lzo

max-clients {{ openvpn.max_client }}

user {{ openvpn.user }}
group {{ openvpn.group }}

persist-key
persist-tun

status openvpn-status.log
log-append  openvpn.log

# Set the appropriate level of log file verbosity.
verb 3

# either mode  server or client
mode server

