#
# Generated by devo.ps for {{ ansible_hostname }}
#
{# Define default variables if undefined #}
{% set openvpn = openvpn | default({}) %}


### Client configuration file for OpenVPN

# Specify that this is a client
client

# Bridge device setting
dev {{ openvpn.dev | default('tun') }}

# Host name and port for the server (default port is 1194)
# note: replace with the correct values your server set up
remote {{ ansible_ssh_host }} {{ openvpn.port | default('1194') }}
proto {{ openvpn.proto | default('udp') }}

# Client does not need to bind to a specific local port
nobind

# Keep trying to resolve the host name of OpenVPN server.
## The windows GUI seems to dislike the following rule. 
##You may need to comment it out.
resolv-retry infinite

# Preserve state across restarts
persist-key
persist-tun

# SSL/TLS parameters - files created previously
ca server.crt
cert {{ openvpn_user | default('client') }}.crt
key {{ openvpn_user | default('client') }}.key

# Since we specified the tls-auth for server, we need it for the client
# note: 0 = server, 1 = client
tls-auth ta.key 1

# Specify same cipher as server
cipher {{ openvpn.cipher | default('BF-CBC') }}

# Use compression
comp-lzo

# Log verbosity (to help if there are problems)
verb 3