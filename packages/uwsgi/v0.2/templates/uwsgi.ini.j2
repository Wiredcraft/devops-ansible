{% set task_options = task.uwsgi.add_app | default({})  %}
[uwsgi]

# App-related settings

# the base directory (full path)
chdir           = {{ task_options.root | mandatory }}

# Django's wsgi application
module          = {{ task_options.module | mandatory }}

# the virtualenv (full path)
home            = {{ task_options.module | mandatory }}

# process-related settings

# master
master          = true

# maximum number of worker processes
processes       = 4

# socket          = /etc/uwsgi/{{ task_options.name }}.sock
http-socket      = :{{ task_options.port }}

# ... with appropriate permissions - may be needed
# chmod-socket    = 664

# clear environment on exit
vacuum          = true