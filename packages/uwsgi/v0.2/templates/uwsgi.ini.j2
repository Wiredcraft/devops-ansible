{% set task_options = task.uwsgi.app_add | default({})  %}
[uwsgi]
# App-related settings

# the base directory (full path)
chdir           = {{ task_options.root | mandatory }}

# wsgi application
module          = {{ task_options.module | mandatory }}

{% if task_options.virtualenv %}
# the virtualenv (full path)
home            = {{ task_options.virtualenv }}
{% endif %}

# process-related settings

# master
master          = true

# maximum number of worker processes
processes       = 4

# socket          = /etc/uwsgi/{{ task_options.name }}.sock
http-socket      = :{{ task_options.port }}

# ... with appropriate permissions - may be needed
# chmod-socket    = 664

# clear environment on exit
vacuum          = true
