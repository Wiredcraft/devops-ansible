---
- name: Ensure memcached is installed
  apt: pkg=memcached state=present
  notify: enable memcached

# Ensure config
- name: ensure the memcached default file
  template:
    src=DEVOPS_PACKAGE/templates/default_memcached.j2
    dest=/etc/default/memcached
    owner=root
    group=root
    mode=0644
  notify: restart memcached

- name: ensure the memcached config file
  template:
    src=DEVOPS_PACKAGE/templates/memcached.conf.j2
    dest=/etc/memcached.conf
    owner=root
    group=root
    mode=0644
  notify: restart memcached

# Ensure running
- include: DEVOPS_PACKAGE/tasks/start.yml
